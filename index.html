<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Developer Portfolio</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/LogoWebsite.png">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        * { font-family: 'Inter', sans-serif; }
        html { scroll-behavior: smooth; }

        :root {
            --bg-primary: #F5F5F5;
            --bg-secondary: #E5E5E5;
            --bg-card: #FFFFFF;
            --text-primary: #1A1A1A;
            --text-secondary: #4A4A4A;
            --border-color: #D1D1D1;
            --accent: #000000;
            --accent-hover: #555555;
        }

        .dark {
            --bg-primary: #0F0F0F;
            --bg-secondary: #1A1A1A;
            --bg-card: #1A1A1A;
            --text-primary: #F5F5F5;
            --text-secondary: #B3B3B3;
            --border-color: #2A2A2A;
            --accent: #FFFFFF;
            --accent-hover: #888888;
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        /* Card hover - belirgin animasyon */
        .project-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background-color: var(--bg-card);
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }
        .devlog-project-card {
            background-color: var(--bg-card);
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }
        /* Alttan yukarƒ± animated outline */
        .project-card::before, .devlog-project-card::before {
            content: '';
            position: absolute;
            inset: 0;
            border: 2px solid rgba(150, 150, 150, 0.8);
            border-radius: inherit;
            pointer-events: none;
            z-index: 10;
            clip-path: polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%);
            transition: clip-path 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .project-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        .project-card:hover::before, .devlog-project-card:hover::before {
            clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
        }
        .project-card .card-content, .devlog-project-card .card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 2;
        }
        .project-card .card-body, .devlog-project-card .card-body {
            flex: 1;
        }
        /* Kart i√ßindeki resim hover efekti */
        .project-card .card-image, .devlog-project-card .card-image {
            overflow: hidden;
        }
        .project-card .card-image img, .devlog-project-card .card-image img {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .project-card:hover .card-image img, .devlog-project-card:hover .card-image img {
            transform: scale(1.08);
        }

        /* Buton hover - gri renk */
        .card-btn {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .card-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(150, 150, 150, 0.8);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 0;
        }
        .card-btn span {
            position: relative;
            z-index: 1;
        }
        .card-btn:hover::before {
            transform: scaleX(1);
        }
        .card-btn:hover {
            color: var(--bg-primary) !important;
            border-color: rgba(150, 150, 150, 0.8) !important;
        }
        /* Kart hover olunca buton da deƒüi≈üsin */
        .project-card:hover .card-btn {
            border-color: rgba(150, 150, 150, 0.8);
            background-color: rgba(150, 150, 150, 0.15);
            color: var(--text-primary);
        }

        .modal-overlay {
            animation: fadeIn 0.2s ease;
        }
        .modal-content {
            animation: slideUp 0.2s ease;
            background-color: var(--bg-primary);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .skill-tag {
            transition: background-color 0.15s ease, color 0.15s ease;
            border-color: var(--accent);
            color: var(--text-primary);
        }
        .skill-tag:hover {
            background-color: var(--accent-hover);
            color: var(--bg-primary);
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }

        .scroll-reveal {
            opacity: 0;
            transform: translateY(40px);
        }
        .scroll-reveal.revealed {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .hero-slideshow { position: absolute; inset: 0; overflow: hidden; }
        .hero-slide { position: absolute; inset: 0; opacity: 0; transition: opacity 1s ease-in-out; }
        .hero-slide.active { opacity: 1; }
        .hero-slide img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.3) blur(2px); }

        .toast {
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%) translateY(100px);
            background-color: var(--accent); color: var(--bg-primary);
            padding: 16px 24px; border-radius: 8px; font-weight: 600;
            z-index: 100; opacity: 0; transition: all 0.3s ease;
        }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }

        .theme-toggle {
            position: relative; width: 56px; height: 28px; border-radius: 14px;
            background-color: var(--border-color); cursor: pointer;
        }
        .theme-toggle-circle {
            position: absolute; top: 2px; left: 2px; width: 24px; height: 24px;
            border-radius: 50%; background-color: var(--accent); transition: transform 0.3s ease;
            display: flex; align-items: center; justify-content: center;
        }
        .dark .theme-toggle-circle { transform: translateX(28px); }

        .nav-bg { background-color: var(--bg-primary); border-color: var(--border-color); }
        .section-primary { background-color: var(--bg-primary); }
        .section-secondary { background-color: var(--bg-secondary); }
        .card-bg { background-color: var(--bg-card); }
        .text-main { color: var(--text-primary); }
        .text-sub { color: var(--text-secondary); }
        .border-main { border-color: var(--border-color); }

        .social-btn {
            border-color: var(--accent); color: var(--text-primary); transition: all 0.2s ease;
        }
        .social-btn:hover {
            background-color: var(--accent-hover); color: var(--bg-primary);
        }

        /* Loading Overlay */
        .loading-overlay {
            position: fixed; inset: 0; background: var(--bg-primary);
            display: flex; align-items: center; justify-content: center;
            z-index: 9998; transition: opacity 0.3s ease;
        }
        .loading-overlay.hidden {
            opacity: 0; pointer-events: none;
        }
        .loading-spinner {
            width: 40px; height: 40px; border: 3px solid var(--border-color);
            border-top-color: var(--accent); border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Admin Panel */
        .admin-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 9999; display: none; align-items: center; justify-content: center;
        }
        .admin-overlay.show { display: flex; }
        .admin-panel {
            background: #111; border: 1px solid #333; border-radius: 16px;
            width: 95%; max-width: 1400px; max-height: 90vh; overflow: hidden;
            display: flex; flex-direction: column;
        }
        .admin-header {
            background: #1a1a1a; border-bottom: 1px solid #333;
            padding: 20px 24px; display: flex; justify-content: space-between; align-items: center;
        }
        .admin-body { padding: 24px; overflow-y: auto; flex: 1; }
        .admin-input {
            width: 100%; padding: 12px 16px; background: #1a1a1a; border: 1px solid #333;
            border-radius: 8px; color: white; margin-bottom: 12px; font-size: 14px;
        }
        .admin-input:focus { outline: none; border-color: #666; }
        .admin-textarea { min-height: 100px; resize: vertical; }
        .admin-btn {
            padding: 10px 20px; border-radius: 8px; font-weight: 600;
            cursor: pointer; transition: all 0.2s; font-size: 14px;
        }
        .admin-btn-primary { background: #fff; color: #000; border: none; }
        .admin-btn-primary:hover { background: #ddd; }
        .admin-btn-secondary { background: #333; color: white; border: 1px solid #444; }
        .admin-btn-danger { background: #dc2626; color: white; border: none; }
        .admin-btn-success { background: #059669; color: white; border: none; }

        .admin-section {
            background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 12px;
            padding: 20px; margin-bottom: 16px;
        }
        .admin-section-title {
            font-size: 16px; font-weight: 700; color: #fff; margin-bottom: 16px;
            display: flex; align-items: center; gap: 8px;
        }
        .admin-label { display: block; color: #888; font-size: 12px; margin-bottom: 6px; font-weight: 500; }
        .admin-tabs { display: flex; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; }
        .admin-tab {
            padding: 10px 20px; background: #222; border: 1px solid #333;
            color: #888; cursor: pointer; border-radius: 8px; transition: all 0.2s; font-size: 14px;
        }
        .admin-tab.active { background: #fff; color: #000; border-color: transparent; }
        .admin-tab:hover:not(.active) { background: #333; color: white; }

        .skill-item, .exp-item, .social-item {
            display: flex; gap: 8px; align-items: center; margin-bottom: 8px;
        }
        .skill-item input, .exp-item input, .social-item input { flex: 1; margin-bottom: 0; }

        .project-card-admin {
            background: #222; border: 1px solid #333; border-radius: 12px;
            padding: 16px; margin-bottom: 12px;
            cursor: grab;
        }
        .project-card-admin.dragging { opacity: 0.5; }
        .project-card-admin.drag-over { border-color: #fff; background: #333; }
        .project-card-admin-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;
        }

        .firebase-status {
            display: flex; align-items: center; gap: 8px; padding: 6px 14px;
            border-radius: 20px; font-size: 12px; font-weight: 500;
        }
        .firebase-status.connected { background: rgba(5,150,105,0.2); color: #10b981; }
        .firebase-status.disconnected { background: rgba(220,38,38,0.2); color: #ef4444; }
        .firebase-status.local { background: rgba(245,158,11,0.2); color: #f59e0b; }
        .firebase-status.loading { background: rgba(100,100,100,0.2); color: #888; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; }
        .connected .status-dot { background: #10b981; }
        .disconnected .status-dot { background: #ef4444; }
        .local .status-dot { background: #f59e0b; }
        .loading .status-dot { background: #888; }

        .password-modal {
            background: #111; padding: 40px; border-radius: 16px;
            text-align: center; border: 1px solid #333; max-width: 400px;
        }

        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        @media (max-width: 768px) { .grid-2 { grid-template-columns: 1fr; } }

        .add-btn {
            display: flex; align-items: center; gap: 6px; padding: 8px 16px;
            background: #222; border: 1px dashed #444; border-radius: 8px;
            color: #888; cursor: pointer; font-size: 13px; transition: all 0.2s;
        }
        .add-btn:hover { border-color: #888; color: #fff; }

        .order-btn {
            width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
            background: #333; border: 1px solid #444; border-radius: 6px;
            color: #888; cursor: pointer; transition: all 0.2s;
        }
        .order-btn:hover:not(:disabled) { background: #555; color: white; border-color: #666; }
        .order-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .order-number {
            background: #fff; color: #000; width: 28px; height: 28px;
            border-radius: 6px; display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 12px;
        }

        .drag-handle {
            cursor: grab; padding: 8px; color: #666;
            display: flex; align-items: center; justify-content: center;
        }
        .drag-handle:hover { color: #fff; }

        .category-badge {
            padding: 2px 8px; border-radius: 4px; font-size: 10px;
            font-weight: 600; text-transform: uppercase;
        }
        .category-badge.main { background: rgba(59, 130, 246, 0.2); color: #60a5fa; }
        .category-badge.other { background: rgba(156, 163, 175, 0.2); color: #9ca3af; }

        /* DEVLOG STYLES */
        .devlog-entry { border-bottom: 1px solid var(--border-color); }
        .devlog-entry:last-child { border-bottom: none; }
        .devlog-entry:hover { background-color: var(--bg-secondary); }
        .devlog-entry-header {
            cursor: pointer; padding: 20px;
            display: flex; align-items: flex-start; gap: 16px;
        }
        .devlog-entry-number { font-size: 12px; font-weight: 700; color: var(--text-secondary); min-width: 40px; }
        .devlog-entry-date { font-size: 13px; color: var(--text-secondary); min-width: 100px; }
        .devlog-entry-title { flex: 1; font-weight: 600; color: var(--text-primary); }
        .devlog-entry-summary { font-size: 14px; color: var(--text-secondary); margin-top: 4px; }
        .devlog-entry-toggle { color: var(--text-secondary); transition: transform 0.2s; }
        .devlog-entry-toggle.open { transform: rotate(180deg); }
        .devlog-entry-content { display: none; padding: 0 20px 20px 76px; }
        .devlog-entry-content.open { display: block; }
        .devlog-media-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px; margin-top: 16px;
        }
        .devlog-media-item {
            aspect-ratio: 16/10; border-radius: 8px; overflow: hidden;
            cursor: pointer; border: 1px solid var(--border-color);
        }
        .devlog-media-item:hover { border-color: var(--accent); }
        .devlog-media-item img, .devlog-media-item video { width: 100%; height: 100%; object-fit: cover; }
        .devlog-inline-media { display: inline-block; }
        .devlog-inline-media img { max-width: 100%; max-height: 400px; border-radius: 8px; border: 1px solid var(--border-color); }
        .devlog-inline-media video { max-width: 500px; max-height: 300px; border-radius: 8px; border: 1px solid var(--border-color); }
        .devlog-inline-media iframe { max-width: 560px; width: 100%; aspect-ratio: 16/9; border-radius: 8px; border: 1px solid var(--border-color); }
        .devlog-entry-body { margin-top: 12px; }
        .devlog-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 16px; }
        .devlog-tag {
            padding: 4px 10px; background: var(--bg-secondary);
            border: 1px solid var(--border-color); border-radius: 4px;
            font-size: 11px; color: var(--text-secondary);
        }

        .devlog-modal { position: fixed; inset: 0; z-index: 50; display: none; }
        .devlog-modal.open { display: block; }
        .devlog-modal-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.8); }
        .devlog-modal-content {
            position: absolute; inset: 20px; background: var(--bg-primary);
            border-radius: 12px; overflow: hidden; display: flex; flex-direction: column;
        }
        @media (min-width: 768px) { .devlog-modal-content { inset: 40px 80px; } }
        @media (min-width: 1024px) { .devlog-modal-content { inset: 60px 120px; } }
        .devlog-modal-header {
            padding: 24px; border-bottom: 1px solid var(--border-color);
            display: flex; align-items: center; justify-content: space-between; gap: 16px;
        }
        .devlog-modal-title { font-size: 24px; font-weight: 700; color: var(--text-primary); }
        .devlog-modal-subtitle { font-size: 14px; color: var(--text-secondary); margin-top: 4px; }
        .devlog-modal-close {
            width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
            background: var(--bg-secondary); border: 1px solid var(--border-color);
            border-radius: 8px; color: var(--text-primary); cursor: pointer;
        }
        .devlog-modal-close:hover { background: var(--accent-hover); color: var(--bg-primary); }
        .devlog-modal-body { flex: 1; overflow-y: auto; }
        .devlog-empty { padding: 60px 20px; text-align: center; color: var(--text-secondary); }

        .media-lightbox {
            position: fixed; inset: 0; z-index: 100; background: rgba(0,0,0,0.95);
            display: none; align-items: center; justify-content: center; padding: 20px;
        }
        .media-lightbox.open { display: flex; }
        .media-lightbox-content { max-width: 90vw; max-height: 90vh; border-radius: 8px; overflow: hidden; }
        .media-lightbox-content img, .media-lightbox-content video { max-width: 100%; max-height: 90vh; object-fit: contain; }
        .media-lightbox-content iframe { width: 80vw; max-width: 960px; aspect-ratio: 16/9; }
        .media-lightbox-close {
            position: absolute; top: 20px; right: 20px; width: 48px; height: 48px;
            background: rgba(255,255,255,0.1); border: none; border-radius: 50%;
            color: white; font-size: 24px; cursor: pointer;
        }
        .media-lightbox-close:hover { background: rgba(255,255,255,0.2); }

        .other-projects-title {
            font-size: 1.5rem; font-weight: 600; color: var(--text-secondary);
            margin-top: 3rem; margin-bottom: 1.5rem; padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }
    </style>
</head>
<body class="dark">
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="text-center">
            <div class="loading-spinner mx-auto mb-4"></div>
            <p class="text-sub">Loading...</p>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <!-- Admin Panel -->
    <div id="adminOverlay" class="admin-overlay">
        <div id="passwordModal" class="password-modal">
            <div class="text-4xl mb-4">üîê</div>
            <h2 class="text-2xl font-bold text-white mb-2">Admin Giri≈üi</h2>
            <p class="text-gray-400 mb-6">Y√∂netim paneline eri≈ümek i√ßin ≈üifre girin</p>
            <input type="password" id="adminPassword" class="admin-input" placeholder="≈ûifre..." onkeypress="if(event.key==='Enter')checkPassword()">
            <div class="flex gap-3 justify-center mt-4">
                <button onclick="checkPassword()" class="admin-btn admin-btn-primary">Giri≈ü Yap</button>
                <button onclick="closeAdmin()" class="admin-btn admin-btn-secondary">ƒ∞ptal</button>
            </div>
        </div>

        <div id="adminPanel" class="admin-panel" style="display: none;">
            <div class="admin-header">
                <div class="flex items-center gap-4">
                    <h2 class="text-xl font-bold text-white">‚öôÔ∏è Site Y√∂netim Paneli</h2>
                    <div id="firebaseStatus" class="firebase-status local">
                        <span class="status-dot"></span>
                        <span>Yerel Mod</span>
                    </div>
                </div>
                <button onclick="closeAdmin()" class="text-white/80 hover:text-white text-3xl leading-none">&times;</button>
            </div>
            <div class="admin-body">
                <div class="admin-tabs">
                    <button class="admin-tab active" onclick="switchTab('hero')">üè† Hero</button>
                    <button class="admin-tab" onclick="switchTab('about')">üë§ Hakkƒ±mda</button>
                    <button class="admin-tab" onclick="switchTab('skills')">üõ†Ô∏è Yetenekler</button>
                    <button class="admin-tab" onclick="switchTab('devlog')">üìù Devlog</button>
                    <button class="admin-tab" onclick="switchTab('projects')">üìÅ Projeler</button>
                    <button class="admin-tab" onclick="switchTab('footer')">üìù Footer</button>
                    <button class="admin-tab" onclick="switchTab('social')">üîó Sosyal</button>
                    <button class="admin-tab" onclick="switchTab('firebase')">üî• Firebase</button>
                    <button class="admin-tab" onclick="switchTab('settings')">‚öôÔ∏è Ayarlar</button>
                </div>

                <!-- Hero Tab -->
                <div id="tab-hero" class="tab-content">
                    <div class="admin-section">
                        <div class="admin-section-title">üè† Hero B√∂l√ºm√º</div>
                        <div class="grid-2">
                            <div>
                                <label class="admin-label">√úst Ba≈ülƒ±k (Subtitle)</label>
                                <input type="text" id="heroSubtitle" class="admin-input" placeholder="Game Developer & Programmer">
                            </div>
                            <div>
                                <label class="admin-label">Ana Ba≈ülƒ±k (ƒ∞sim)</label>
                                <input type="text" id="heroTitle" class="admin-input" placeholder="Yasin Sen">
                            </div>
                        </div>
                        <label class="admin-label">A√ßƒ±klama</label>
                        <textarea id="heroDesc" class="admin-input admin-textarea" placeholder="A√ßƒ±klama metni..."></textarea>
                        <label class="admin-label">Buton Yazƒ±sƒ±</label>
                        <input type="text" id="heroButton" class="admin-input" placeholder="Explore Projects">
                    </div>
                </div>

                <!-- About Tab -->
                <div id="tab-about" class="tab-content" style="display:none;">
                    <div class="admin-section">
                        <div class="admin-section-title">üë§ Hakkƒ±mda B√∂l√ºm√º</div>
                        <label class="admin-label">Ba≈ülƒ±k</label>
                        <input type="text" id="aboutTitle" class="admin-input" placeholder="About Me">
                        <label class="admin-label">Paragraf 1</label>
                        <textarea id="aboutText1" class="admin-input admin-textarea"></textarea>
                        <label class="admin-label">Paragraf 2</label>
                        <textarea id="aboutText2" class="admin-input admin-textarea"></textarea>
                    </div>
                </div>

                <!-- Skills Tab -->
                <div id="tab-skills" class="tab-content" style="display:none;">
                    <div class="admin-section">
                        <div class="admin-section-title">üõ†Ô∏è Yetenekler</div>
                        <div id="skillsList"></div>
                        <button onclick="addSkill()" class="add-btn">+ Yetenek Ekle</button>
                    </div>
                    <div class="admin-section">
                        <div class="admin-section-title">üìä Deneyim Ba≈ülƒ±klarƒ±</div>
                        <label class="admin-label">Deneyim Ba≈ülƒ±ƒüƒ±</label>
                        <input type="text" id="expTitle" class="admin-input" placeholder="Experience Highlights">
                        <div id="expList"></div>
                        <button onclick="addExp()" class="add-btn">+ Deneyim Ekle</button>
                    </div>
                </div>

                <!-- Devlog Tab -->
                <div id="tab-devlog" class="tab-content" style="display:none;">
                    <div class="admin-section">
                        <div class="admin-section-title">üìù Devlog B√∂l√ºm√º Ayarlarƒ±</div>
                        <div class="grid-2">
                            <div>
                                <label class="admin-label">B√∂l√ºm Ba≈ülƒ±ƒüƒ±</label>
                                <input type="text" id="devlogSectionTitle" class="admin-input" placeholder="Development Log">
                            </div>
                            <div>
                                <label class="admin-label">B√∂l√ºm Alt Ba≈ülƒ±ƒüƒ±</label>
                                <input type="text" id="devlogSectionSubtitle" class="admin-input" placeholder="Follow the journey...">
                            </div>
                        </div>
                    </div>
                    <div class="admin-section">
                        <div class="flex justify-between items-center mb-4">
                            <div class="admin-section-title mb-0">üìù Devlog Projeleri</div>
                            <button onclick="addDevlogProject()" class="admin-btn admin-btn-primary">+ Yeni Proje</button>
                        </div>
                        <p class="text-gray-400 text-sm mb-4">Her proje i√ßin ayrƒ± devlog kartƒ± olu≈üturulur.</p>
                        <div id="devlogProjectsList"></div>
                    </div>
                </div>

                <!-- Projects Tab -->
                <div id="tab-projects" class="tab-content" style="display:none;">
                    <div class="admin-section">
                        <div class="admin-section-title">üìÅ Proje B√∂l√ºm√º Ba≈ülƒ±klarƒ±</div>
                        <div class="grid-2">
                            <div>
                                <label class="admin-label">Ba≈ülƒ±k</label>
                                <input type="text" id="projectsTitle" class="admin-input" placeholder="My Projects">
                            </div>
                            <div>
                                <label class="admin-label">Alt Ba≈ülƒ±k</label>
                                <input type="text" id="projectsSubtitle" class="admin-input" placeholder="A collection of games...">
                            </div>
                        </div>
                        <div class="grid-2 mt-4">
                            <div>
                                <label class="admin-label">Other Projects Ba≈ülƒ±ƒüƒ±</label>
                                <input type="text" id="otherProjectsTitle" class="admin-input" placeholder="Other Projects">
                            </div>
                        </div>
                    </div>
                    <div class="admin-section">
                        <div class="flex justify-between items-center mb-4">
                            <div class="admin-section-title mb-0">üìÅ Projeler (S√ºr√ºkleyerek sƒ±ralayƒ±n)</div>
                            <button onclick="addNewProject()" class="admin-btn admin-btn-primary">+ Yeni Proje</button>
                        </div>
                        <p class="text-gray-400 text-sm mb-4">üí° Projeleri s√ºr√ºkleyerek sƒ±ralayabilirsiniz. Videos alanƒ±na YouTube linki veya dosya yolu ekleyebilirsiniz.</p>
                        <div id="projectsList"></div>
                    </div>
                </div>

                <!-- Footer Tab -->
                <div id="tab-footer" class="tab-content" style="display:none;">
                    <div class="admin-section">
                        <div class="admin-section-title">üìù Footer</div>
                        <label class="admin-label">Copyright Metni</label>
                        <input type="text" id="footerCopyright" class="admin-input" placeholder="¬© 2024 Game Developer Portfolio...">
                        <label class="admin-label">Alt Metin</label>
                        <input type="text" id="footerSubtext" class="admin-input" placeholder="Built with passion for gaming">
                    </div>
                </div>

                <!-- Social Tab -->
                <div id="tab-social" class="tab-content" style="display:none;">
                    <div class="admin-section">
                        <div class="admin-section-title">üîó Sosyal Medya Linkleri</div>
                        <div class="grid-2">
                            <div>
                                <label class="admin-label">GitHub URL</label>
                                <input type="text" id="socialGithub" class="admin-input" placeholder="https://github.com/...">
                            </div>
                            <div>
                                <label class="admin-label">Gmail Adresi</label>
                                <input type="text" id="socialGmail" class="admin-input" placeholder="email@gmail.com">
                            </div>
                            <div>
                                <label class="admin-label">Discord Kullanƒ±cƒ± Adƒ±</label>
                                <input type="text" id="socialDiscord" class="admin-input" placeholder="username">
                            </div>
                        </div>
                    </div>
                    <div class="admin-section">
                        <div class="admin-section-title">üîó Navigasyon</div>
                        <div class="grid-2">
                            <div>
                                <label class="admin-label">About Link Yazƒ±sƒ±</label>
                                <input type="text" id="navAbout" class="admin-input" placeholder="About">
                            </div>
                            <div>
                                <label class="admin-label">Devlog Link Yazƒ±sƒ±</label>
                                <input type="text" id="navDevlog" class="admin-input" placeholder="Devlog">
                            </div>
                            <div>
                                <label class="admin-label">Projects Link Yazƒ±sƒ±</label>
                                <input type="text" id="navProjects" class="admin-input" placeholder="Projects">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Firebase Tab -->
                <div id="tab-firebase" class="tab-content" style="display:none;">
                    <div class="admin-section">
                        <div class="admin-section-title">üî• Firebase Baƒülantƒ±sƒ±</div>
                        <div class="grid-2">
                            <div>
                                <label class="admin-label">API Key</label>
                                <input type="text" id="fbApiKey" class="admin-input" placeholder="AIza...">
                            </div>
                            <div>
                                <label class="admin-label">Project ID</label>
                                <input type="text" id="fbProjectId" class="admin-input" placeholder="your-app">
                            </div>
                            <div>
                                <label class="admin-label">Database URL</label>
                                <input type="text" id="fbDatabaseUrl" class="admin-input" placeholder="https://your-app-default-rtdb.firebaseio.com">
                            </div>
                            <div>
                                <label class="admin-label">App ID</label>
                                <input type="text" id="fbAppId" class="admin-input" placeholder="1:123:web:abc">
                            </div>
                        </div>
                        <div class="flex gap-3 mt-4 flex-wrap">
                            <button onclick="saveFirebaseConfig()" class="admin-btn admin-btn-primary">üî• Firebase'i Baƒüla</button>
                            <button onclick="testFirebase()" class="admin-btn admin-btn-secondary">Test Et</button>
                            <button onclick="disconnectFirebase()" class="admin-btn admin-btn-danger">Baƒülantƒ±yƒ± Kes</button>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="tab-settings" class="tab-content" style="display:none;">
                    <div class="admin-section">
                        <div class="admin-section-title">üîê ≈ûifre Deƒüi≈ütir</div>
                        <label class="admin-label">Yeni ≈ûifre</label>
                        <input type="password" id="newPassword" class="admin-input" placeholder="Yeni ≈üifre...">
                        <button onclick="changePassword()" class="admin-btn admin-btn-primary">≈ûifreyi Deƒüi≈ütir</button>
                    </div>
                    <div class="admin-section">
                        <div class="admin-section-title">üé® Site Ba≈ülƒ±ƒüƒ±</div>
                        <label class="admin-label">Sayfa Ba≈ülƒ±ƒüƒ± (Browser Tab)</label>
                        <input type="text" id="siteTitle" class="admin-input" placeholder="Game Developer Portfolio">
                    </div>
                </div>
            </div>
            <div class="p-4 border-t border-gray-800 flex justify-between items-center bg-black/50">
                <span class="text-gray-500 text-sm">Ctrl+Shift+P ile a√ßƒ±lƒ±r</span>
                <div class="flex gap-3">
                    <button onclick="resetToDefault()" class="admin-btn admin-btn-secondary">üîÑ Varsayƒ±lana D√∂n</button>
                    <button onclick="saveAllData()" class="admin-btn admin-btn-success">üíæ T√ºm√ºn√º Kaydet</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Devlog Entry Editor Modal -->
    <div id="devlogEntryModal" class="fixed inset-0 bg-black/90 flex items-center justify-center z-[10001] p-4" style="display:none;">
        <div class="bg-gray-900 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 border border-gray-700">
            <h3 class="text-xl font-bold text-white mb-4" id="devlogEntryModalTitle">üìù Yeni G√ºncelleme</h3>
            <input type="hidden" id="editingDevlogProjectId">
            <input type="hidden" id="editingDevlogEntryId">
            <div class="grid-2">
                <div>
                    <label class="admin-label">Tarih</label>
                    <input type="date" id="devlogEntryDate" class="admin-input">
                </div>
            </div>
            <label class="admin-label">Ba≈ülƒ±k</label>
            <input type="text" id="devlogEntryTitle" class="admin-input" placeholder="Lobby sistemini ba≈ütan yazdƒ±m">
            <label class="admin-label">√ñzet (1-2 c√ºmle)</label>
            <input type="text" id="devlogEntrySummary" class="admin-input" placeholder="FishNet ile yeni lobby sistemi">
            <label class="admin-label">Detaylƒ± A√ßƒ±klama (YouTube linki veya dosya yolu ekleyebilirsiniz)</label>
            <textarea id="devlogEntryContent" class="admin-input admin-textarea" style="min-height:180px;" placeholder="A√ßƒ±klama...

Medya eklemek i√ßin yeni satƒ±ra yazƒ±n:
./assets/image.png
./assets/video.mp4
https://www.youtube.com/watch?v=VIDEO_ID"></textarea>
            <label class="admin-label">Etiketler (virg√ºlle ayƒ±rƒ±n)</label>
            <input type="text" id="devlogEntryTags" class="admin-input" placeholder="Multiplayer, UI...">
            <div class="flex gap-3 mt-4">
                <button onclick="saveDevlogEntry()" class="admin-btn admin-btn-success">üíæ Kaydet</button>
                <button onclick="closeDevlogEntryModal()" class="admin-btn admin-btn-secondary">ƒ∞ptal</button>
            </div>
        </div>
    </div>

    <!-- Devlog Modal -->
    <div id="devlogModal" class="devlog-modal">
        <div class="devlog-modal-overlay" onclick="closeDevlogModal()"></div>
        <div class="devlog-modal-content">
            <div class="devlog-modal-header">
                <div>
                    <h2 id="devlogModalTitle" class="devlog-modal-title">Project Name ‚Äî Development Log</h2>
                    <p id="devlogModalSubtitle" class="devlog-modal-subtitle">8 updates ‚Ä¢ Last update: 20 Jan 2025</p>
                </div>
                <button class="devlog-modal-close" onclick="closeDevlogModal()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="devlog-modal-body" id="devlogModalBody"></div>
        </div>
    </div>

    <!-- Media Lightbox -->
    <div id="mediaLightbox" class="media-lightbox" onclick="closeLightbox()">
        <button class="media-lightbox-close">&times;</button>
        <div class="media-lightbox-content" id="lightboxContent" onclick="event.stopPropagation()"></div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 nav-bg backdrop-blur-sm z-40 border-b border-main">
        <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#hero" class="text-xl font-bold tracking-tight text-main"></a>
            <div class="flex items-center gap-6">
                <a href="#about" id="navAboutDisplay" class="text-sm font-medium text-main hover:text-sub transition-colors">About</a>
                <a href="#devlog" id="navDevlogDisplay" class="text-sm font-medium text-main hover:text-sub transition-colors">Devlog</a>
                <a href="#projects" id="navProjectsDisplay" class="text-sm font-medium text-main hover:text-sub transition-colors">Projects</a>
                <div class="theme-toggle" onclick="toggleTheme()">
                    <div class="theme-toggle-circle">
                        <svg class="w-4 h-4 sun-icon" fill="currentColor" viewBox="0 0 24 24" style="color: var(--bg-primary)">
                            <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z" />
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="min-h-screen flex items-center justify-center text-white relative overflow-hidden">
        <div class="hero-slideshow" id="heroSlideshow"></div>
        <div class="absolute inset-0 bg-black/50 z-[1]"></div>
        <div class="absolute inset-0 opacity-20 z-[2]">
            <div class="absolute top-20 left-20 w-64 h-64 border border-white/30 rotate-45"></div>
            <div class="absolute bottom-20 right-20 w-48 h-48 border border-white/30 rotate-12"></div>
        </div>
        <div class="text-center z-10 px-6">
            <p id="heroSubtitleDisplay" class="text-gray-400 uppercase tracking-widest text-sm mb-4">Game Developer & Programmer</p>
            <h1 id="heroTitleDisplay" class="text-5xl md:text-7xl font-extrabold mb-6 tracking-tight">Yasin Sen</h1>
            <p id="heroDescDisplay" class="text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto mb-8">Hi, I'm Yasin. I've been developing games for 5 years.</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <a href="#projects" id="heroButtonDisplay" class="inline-block border-2 border-white px-8 py-3 font-semibold hover:bg-gray-300 hover:text-black hover:border-gray-300 transition-all duration-200">Explore Projects</a>
                <a href="#devlog" id="heroDevlogButtonDisplay" class="inline-block border-2 border-white px-8 py-3 font-semibold hover:bg-gray-300 hover:text-black hover:border-gray-300 transition-all duration-200">Browse Devlogs</a>
            </div>
        </div>
        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce z-10">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
            </svg>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-24 section-primary">
        <div class="max-w-6xl mx-auto px-6">
            <div class="grid md:grid-cols-2 gap-16 items-center">
                <div class="scroll-reveal">
                    <h2 id="aboutTitleDisplay" class="text-4xl font-bold mb-6 text-main">About Me</h2>
                    <p id="aboutText1Display" class="text-sub text-lg leading-relaxed mb-6"></p>
                    <p id="aboutText2Display" class="text-sub text-lg leading-relaxed mb-8"></p>
                    <div id="socialButtons" class="flex gap-4"></div>
                </div>
                <div class="scroll-reveal">
                    <h3 class="text-xl font-bold mb-4 text-main">Skills & Technologies</h3>
                    <div id="skillsDisplay" class="flex flex-wrap gap-3"></div>
                    <div class="mt-8 p-6 card-bg rounded-lg shadow-sm border border-main">
                        <h4 id="expTitleDisplay" class="font-bold mb-3 text-main">Experience Highlights</h4>
                        <ul id="expDisplay" class="space-y-2 text-sub"></ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Devlog Section -->
    <section id="devlog" class="py-24 section-secondary">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-16 scroll-reveal">
                <h2 id="devlogTitleDisplay" class="text-4xl font-bold mb-4 text-main">Development Log</h2>
                <p id="devlogSubtitleDisplay" class="text-sub text-lg">Follow the journey of my projects</p>
            </div>
            <div id="devlogGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="py-24 section-primary">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-16 scroll-reveal">
                <h2 id="projectsTitleDisplay" class="text-4xl font-bold mb-4 text-main">My Projects</h2>
                <p id="projectsSubtitleDisplay" class="text-sub text-lg"></p>
            </div>
            <div id="mainProjectsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
            <h3 id="otherProjectsTitleDisplay" class="other-projects-title scroll-reveal" style="display:none;">Other Projects</h3>
            <div id="otherProjectsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>
    </section>

    <!-- Project Modal -->
    <div id="projectModal" class="fixed inset-0 z-50 hidden">
        <div class="modal-overlay absolute inset-0 bg-black/80" onclick="closeModal()"></div>
        <div class="modal-content absolute inset-4 md:inset-10 lg:inset-20 overflow-y-auto rounded-lg">
            <button onclick="closeModal()" class="absolute top-4 right-4 w-10 h-10 flex items-center justify-center z-10 rounded" style="background-color: var(--accent); color: var(--bg-primary);">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
            <div id="modalContent" class="p-8 md:p-12"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-black text-white py-12">
        <div class="max-w-6xl mx-auto px-6 text-center">
            <p id="footerCopyrightDisplay" class="text-gray-400 mb-4"></p>
            <p id="footerSubtextDisplay" class="text-sm text-gray-500"></p>
        </div>
    </footer>

    <script>
        // ==================== YOUTUBE HELPERS ====================
        function isYouTubeUrl(url) {
            return url && (url.includes('youtube.com') || url.includes('youtu.be'));
        }

        function getYouTubeId(url) {
            if (!url) return null;
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        }

        function getYouTubeThumbnail(videoId) {
            return `https://img.youtube.com/vi/${videoId}/mqdefault.jpg`;
        }

        function renderVideoElement(url, autoplay = false, controls = true) {
            if (isYouTubeUrl(url)) {
                const videoId = getYouTubeId(url);
                if (videoId) {
                    const autoplayParam = autoplay ? '&autoplay=1' : '';
                    return `<iframe src="https://www.youtube.com/embed/${videoId}?rel=0${autoplayParam}" class="w-full h-full" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                }
            }
            return `<video src="${url}" class="w-full h-full" ${controls ? 'controls' : ''} ${autoplay ? 'autoplay' : ''}></video>`;
        }

        function renderVideoThumbnail(url, onclick) {
            if (isYouTubeUrl(url)) {
                const videoId = getYouTubeId(url);
                if (videoId) {
                    return `<div class="relative w-full aspect-video cursor-pointer bg-gray-800 rounded overflow-hidden" onclick="${onclick}">
                        <img src="${getYouTubeThumbnail(videoId)}" alt="YouTube Video" class="w-full h-full object-cover">
                        <div class="absolute inset-0 flex items-center justify-center bg-black/40">
                            <div class="w-12 h-12 rounded-full bg-red-600 flex items-center justify-center">
                                <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                        </div>
                        <span class="absolute bottom-1 right-1 text-xs text-white bg-red-600 px-1 rounded">YouTube</span>
                    </div>`;
                }
            }
            // Local video - show static thumbnail with play button
            return `<div class="relative w-full aspect-video cursor-pointer bg-gray-700 rounded overflow-hidden" onclick="${onclick}">
                <div class="absolute inset-0 flex items-center justify-center">
                    <svg class="w-16 h-16 text-gray-500" fill="currentColor" viewBox="0 0 24 24"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/></svg>
                </div>
                <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                    <div class="w-12 h-12 rounded-full bg-white/90 flex items-center justify-center">
                        <svg class="w-6 h-6 text-black ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </div>
                </div>
                <span class="absolute bottom-1 right-1 text-xs text-white bg-black/70 px-1 rounded">VIDEO</span>
            </div>`;
        }

        function isVideoUrl(url) {
            return url && (url.match(/\.(mp4|webm|ogg)$/i) || isYouTubeUrl(url));
        }

        // Fix asset paths for GitHub Pages
        function fixAssetPath(path) {
            if (!path) return path;
            // Remove leading ./ if present
            if (path.startsWith('./')) {
                path = path.substring(2);
            }
            return path;
        }

        // ==================== EMBEDDED FIREBASE CONFIG ====================
        const EMBEDDED_FIREBASE_CONFIG = {
            apiKey: "AIzaSyCJfiH5G4_3cqN5fH41SoXAyG_KMrP86ho",
            databaseURL: "https://portfolio-9f1f9-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "portfolio-9f1f9",
            appId: "1:214233175280:web:a2da60c182a0ec40b05e35"
        };

        // ==================== DEFAULT DATA ====================
        const defaultData = {
            hero: { subtitle: "Game Developer & Programmer", title: "Yasin Sen", desc: "Hi, I'm Yasin. I've been developing games for 5 years, crafting both multiplayer and singleplayer experiences.", button: "Explore Projects", devlogButton: "Browse Devlogs" },
            about: { title: "About Me", text1: "I'm Yasin, a game developer with 6 years of experience working on a variety of game genres.", text2: "Six years ago, I started with a small, fun project just to experiment and learn." },
            skills: ["Unity", "Unreal Engine", "C#", "Blender", "3D Modeling", "Level Design", "Shader Programming", "AI Systems", "Multiplayer", "Git", "Aseprite", "Game Design"],
            experience: { title: "Experience Highlights", items: ["2+ years of multiplayer experience (FishNet, Photon, Mirror)", "Cross-genre development", "Procedural animation experience"] },
            social: { github: "https://github.com/yasib48", gmail: "yasinsen.job@gmail.com", discord: "yasib" },
            nav: { about: "About", devlog: "Devlog", projects: "Projects" },
            devlogSection: { title: "Development Log", subtitle: "Follow the journey of my projects from concept to completion" },
            devlogProjects: [
                { id: 1, name: "Super Golf", description: "Multiplayer arcade golf game development journey", thumbnail: "./assets/Map1.png", entries: [
                    { id: 1, date: "2025-01-20", title: "Rebuilt the lobby system from scratch", summary: "New lobby system with FishNet.", content: "This week I completely rewrote the lobby system.\n\n./assets/Lobi.png", tags: ["Multiplayer", "FishNet"] },
                    { id: 2, date: "2025-01-15", title: "Ball physics improvements", summary: "More realistic ball movement.", content: "Worked on ball physics.\n\n./assets/Map1.png", tags: ["Physics", "Gameplay"] }
                ]},
                { id: 2, name: "Level Evil", description: "Challenging pixel art platformer", thumbnail: "./assets/LDLevel1.png", entries: [
                    { id: 1, date: "2025-01-18", title: "First level design completed", summary: "Challenging but fair level.", content: "Level Evil's first level is now playable.\n\n./assets/LDLevel1.png", tags: ["Level Design"] }
                ]}
            ],
            projectsSection: { title: "My Projects", subtitle: "A collection of games I've developed", otherProjectsTitle: "Other Projects" },
            footer: { copyright: "¬© 2024 Game Developer Portfolio. All rights reserved.", subtext: "Built with passion for gaming" },
            siteTitle: "Game Developer Portfolio",
            projects: [
                { id: 1, title: "Super Golf", shortDesc: "A multiplayer golf game with Steam integration", fullDesc: "This is a multiplayer arcade golf game developed entirely by me.", thumbnail: "./assets/Map1.png", screenshots: ["./assets/Map1.png", "./assets/MainMenu.png", "./assets/Lobi.png"], videos: [], technologies: ["Unity", "Blender", "C#", "FishNet", "Steam"], platforms: ["PC"], year: "2025 - 2026", downloadLink: "", category: "main" },
                { id: 2, title: "Level Evil", shortDesc: "Demo of a minimalist pixel art platformer", fullDesc: "This demo represents a small but highly challenging level I designed.", thumbnail: "./assets/LDLevel1.png", screenshots: ["./assets/LDLevel1.png", "./assets/LDLevel2.png", "./assets/LDLevel3.png"], videos: ["./assets/LDPlay.mp4"], technologies: ["Unity", "Aseprite", "C#"], platforms: ["PC"], year: "2025", downloadLink: "https://neutrony.itch.io/level-evil-demo", category: "other" }
            ]
        };

        // ==================== STATE ====================
        let siteData = JSON.parse(JSON.stringify(defaultData));
        let adminPassword = localStorage.getItem('adminPassword') || '8520';
        let isLoggedIn = false;
        let firebaseDb = null;
        let firebaseConnected = false;
        let firebaseConfig = EMBEDDED_FIREBASE_CONFIG?.apiKey ? EMBEDDED_FIREBASE_CONFIG : JSON.parse(localStorage.getItem('firebaseConfig') || 'null');

        // ==================== FIREBASE ====================
        function initFirebase() {
            updateFirebaseStatus('loading');
            
            if (firebaseConfig && firebaseConfig.apiKey && firebaseConfig.databaseURL) {
                try {
                    if (!firebase.apps.length) {
                        firebase.initializeApp(firebaseConfig);
                    }
                    firebaseDb = firebase.database();
                    
                    // Timeout ile veri √ßekme
                    const timeout = setTimeout(() => {
                        console.log('Firebase timeout, using local data');
                        updateFirebaseStatus('disconnected');
                        loadLocalData();
                        applyAllData();
                        hideLoading();
                    }, 5000);
                    
                    firebaseDb.ref('siteData').once('value').then((snapshot) => {
                        clearTimeout(timeout);
                        firebaseConnected = true;
                        updateFirebaseStatus('connected');
                        const data = snapshot.val();
                        if (data) {
                            siteData = mergeWithDefaults(data);
                        }
                        applyAllData();
                        hideLoading();
                    }).catch((err) => {
                        clearTimeout(timeout);
                        console.error('Firebase error:', err);
                        updateFirebaseStatus('disconnected');
                        loadLocalData();
                        applyAllData();
                        hideLoading();
                    });
                } catch (error) {
                    console.error('Firebase init error:', error);
                    updateFirebaseStatus('disconnected');
                    loadLocalData();
                    applyAllData();
                    hideLoading();
                }
            } else {
                loadLocalData();
                updateFirebaseStatus('local');
                applyAllData();
                hideLoading();
            }
        }

        function mergeWithDefaults(data) {
            const projects = (data.projects || defaultData.projects).map(p => ({ ...p, category: p.category || 'main' }));
            return { ...JSON.parse(JSON.stringify(defaultData)), ...data,
                hero: { ...defaultData.hero, ...(data.hero || {}) },
                about: { ...defaultData.about, ...(data.about || {}) },
                experience: { ...defaultData.experience, ...(data.experience || {}) },
                social: { ...defaultData.social, ...(data.social || {}) },
                nav: { ...defaultData.nav, ...(data.nav || {}) },
                devlogSection: { ...defaultData.devlogSection, ...(data.devlogSection || {}) },
                projectsSection: { ...defaultData.projectsSection, ...(data.projectsSection || {}) },
                footer: { ...defaultData.footer, ...(data.footer || {}) },
                skills: data.skills || defaultData.skills,
                projects: projects,
                devlogProjects: data.devlogProjects || defaultData.devlogProjects
            };
        }

        function loadLocalData() {
            const saved = localStorage.getItem('siteData');
            if (saved) { try { siteData = mergeWithDefaults(JSON.parse(saved)); } catch (e) {} }
        }

        function hideLoading() {
            setTimeout(() => { document.getElementById('loadingOverlay')?.classList.add('hidden'); }, 200);
        }

        function updateFirebaseStatus(status) {
            const el = document.getElementById('firebaseStatus');
            if (!el) return;
            el.className = `firebase-status ${status}`;
            const labels = { connected: 'üî• Firebase Baƒülƒ±', disconnected: '‚ùå Baƒülantƒ± Hatasƒ±', local: 'üíæ Yerel Mod', loading: '‚è≥ Y√ºkleniyor...' };
            el.innerHTML = `<span class="status-dot"></span><span>${labels[status]}</span>`;
        }

        function saveFirebaseConfig() {
            const newConfig = { apiKey: document.getElementById('fbApiKey').value.trim(), databaseURL: document.getElementById('fbDatabaseUrl').value.trim(), projectId: document.getElementById('fbProjectId').value.trim(), appId: document.getElementById('fbAppId').value.trim() };
            if (!newConfig.apiKey || !newConfig.databaseURL) { showToast('‚ùå API Key ve Database URL zorunlu!'); return; }
            localStorage.setItem('firebaseConfig', JSON.stringify(newConfig));
            showToast('‚úÖ Firebase ayarlarƒ± kaydedildi! Sayfa yenileniyor...');
            setTimeout(() => location.reload(), 1500);
        }

        function testFirebase() { showToast(firebaseConnected ? '‚úÖ Firebase baƒülantƒ±sƒ± ba≈üarƒ±lƒ±!' : '‚ùå Baƒülantƒ± yok!'); }
        function disconnectFirebase() { localStorage.removeItem('firebaseConfig'); showToast('üîå Baƒülantƒ± kesildi!'); setTimeout(() => location.reload(), 1500); }

        // ==================== SAVE & APPLY DATA ====================
        function collectFormData() {
            siteData.hero = { subtitle: document.getElementById('heroSubtitle')?.value || siteData.hero.subtitle, title: document.getElementById('heroTitle')?.value || siteData.hero.title, desc: document.getElementById('heroDesc')?.value || siteData.hero.desc, button: document.getElementById('heroButton')?.value || siteData.hero.button, devlogButton: siteData.hero.devlogButton };
            siteData.about = { title: document.getElementById('aboutTitle')?.value || siteData.about.title, text1: document.getElementById('aboutText1')?.value || siteData.about.text1, text2: document.getElementById('aboutText2')?.value || siteData.about.text2 };
            siteData.skills = Array.from(document.querySelectorAll('#skillsList input')).map(i => i.value).filter(v => v);
            siteData.experience = { title: document.getElementById('expTitle')?.value || siteData.experience.title, items: Array.from(document.querySelectorAll('#expList input')).map(i => i.value).filter(v => v) };
            siteData.social = { github: document.getElementById('socialGithub')?.value || siteData.social.github, gmail: document.getElementById('socialGmail')?.value || siteData.social.gmail, discord: document.getElementById('socialDiscord')?.value || siteData.social.discord };
            siteData.nav = { about: document.getElementById('navAbout')?.value || siteData.nav.about, devlog: document.getElementById('navDevlog')?.value || siteData.nav.devlog, projects: document.getElementById('navProjects')?.value || siteData.nav.projects };
            siteData.devlogSection = { title: document.getElementById('devlogSectionTitle')?.value || siteData.devlogSection.title, subtitle: document.getElementById('devlogSectionSubtitle')?.value || siteData.devlogSection.subtitle };
            siteData.projectsSection = { title: document.getElementById('projectsTitle')?.value || siteData.projectsSection.title, subtitle: document.getElementById('projectsSubtitle')?.value || siteData.projectsSection.subtitle, otherProjectsTitle: document.getElementById('otherProjectsTitle')?.value || siteData.projectsSection.otherProjectsTitle };
            siteData.footer = { copyright: document.getElementById('footerCopyright')?.value || siteData.footer.copyright, subtext: document.getElementById('footerSubtext')?.value || siteData.footer.subtext };
            siteData.siteTitle = document.getElementById('siteTitle')?.value || siteData.siteTitle;
        }

        function applyAllData() {
            document.getElementById('heroSubtitleDisplay').textContent = siteData.hero.subtitle;
            document.getElementById('heroTitleDisplay').textContent = siteData.hero.title;
            document.getElementById('heroDescDisplay').textContent = siteData.hero.desc;
            document.getElementById('heroButtonDisplay').textContent = siteData.hero.button;
            document.getElementById('heroDevlogButtonDisplay').textContent = siteData.hero.devlogButton || 'Browse Devlogs';
            document.getElementById('aboutTitleDisplay').textContent = siteData.about.title;
            document.getElementById('aboutText1Display').textContent = siteData.about.text1;
            document.getElementById('aboutText2Display').textContent = siteData.about.text2;
            document.getElementById('skillsDisplay').innerHTML = siteData.skills.map(s => `<span class="skill-tag px-4 py-2 border text-sm font-medium cursor-default">${s}</span>`).join('');
            document.getElementById('expTitleDisplay').textContent = siteData.experience.title;
            document.getElementById('expDisplay').innerHTML = siteData.experience.items.map(e => `<li class="flex items-center gap-2"><span class="w-2 h-2 bg-current"></span>${e}</li>`).join('');
            document.getElementById('socialButtons').innerHTML = `
                <a href="${siteData.social.github}" target="_blank" class="social-btn w-10 h-10 border flex items-center justify-center"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></a>
                <button onclick="showContactInfo('gmail', '${siteData.social.gmail}')" class="social-btn w-10 h-10 border flex items-center justify-center"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/></svg></button>
                <button onclick="showContactInfo('discord', '${siteData.social.discord}')" class="social-btn w-10 h-10 border flex items-center justify-center"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg></button>`;
            document.getElementById('navAboutDisplay').textContent = siteData.nav.about;
            document.getElementById('navDevlogDisplay').textContent = siteData.nav.devlog;
            document.getElementById('navProjectsDisplay').textContent = siteData.nav.projects;
            document.getElementById('devlogTitleDisplay').textContent = siteData.devlogSection.title;
            document.getElementById('devlogSubtitleDisplay').textContent = siteData.devlogSection.subtitle;
            document.getElementById('projectsTitleDisplay').textContent = siteData.projectsSection.title;
            document.getElementById('projectsSubtitleDisplay').textContent = siteData.projectsSection.subtitle;
            document.getElementById('otherProjectsTitleDisplay').textContent = siteData.projectsSection.otherProjectsTitle || 'Other Projects';
            document.getElementById('footerCopyrightDisplay').textContent = siteData.footer.copyright;
            document.getElementById('footerSubtextDisplay').textContent = siteData.footer.subtext;
            document.title = siteData.siteTitle;
            renderDevlogCards();
            renderProjects();
            initSlideshow();
        }

        function saveAllData() {
            collectFormData();
            if (firebaseConnected && firebaseDb) {
                firebaseDb.ref('siteData').set(siteData).then(() => showToast('‚úÖ T√ºm veriler Firebase\'e kaydedildi!')).catch(err => showToast('‚ùå Hata: ' + err.message));
            } else {
                localStorage.setItem('siteData', JSON.stringify(siteData));
                showToast('üíæ Veriler yerel olarak kaydedildi!');
            }
            applyAllData();
        }

        function resetToDefault() {
            if (confirm('T√ºm deƒüi≈üiklikler silinecek. Emin misiniz?')) {
                siteData = JSON.parse(JSON.stringify(defaultData));
                if (firebaseConnected && firebaseDb) firebaseDb.ref('siteData').set(siteData);
                localStorage.setItem('siteData', JSON.stringify(siteData));
                loadAdminForm();
                applyAllData();
                showToast('üîÑ Varsayƒ±lana d√∂n√ºld√º!');
            }
        }

        // ==================== DEVLOG FUNCTIONS ====================
        function renderDevlogCards() {
            const grid = document.getElementById('devlogGrid');
            if (!siteData.devlogProjects?.length) { grid.innerHTML = '<p class="text-sub text-center col-span-3">No devlog projects added yet.</p>'; return; }
            grid.innerHTML = siteData.devlogProjects.map(project => {
                const entries = project.entries || [];
                const sortedEntries = [...entries].sort((a, b) => new Date(b.date) - new Date(a.date));
                const lastUpdate = sortedEntries[0]?.date ? formatDate(sortedEntries[0].date) : 'No updates';
                return `
                    <div class="devlog-project-card cursor-pointer shadow-lg scroll-reveal rounded-lg" onclick="openDevlogModal(${project.id})">
                        <div class="card-image aspect-video"><img src="${project.thumbnail}" alt="${project.name}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/400x225?text=No+Image'"></div>
                        <div class="card-content p-6">
                            <div class="card-body">
                                <h3 class="text-xl font-bold text-main mb-2">${project.name}</h3>
                                <p class="text-sub text-sm mb-4">${project.description}</p>
                                <div class="flex justify-between items-center text-sm">
                                    <span class="text-sub">${entries.length} update${entries.length !== 1 ? 's' : ''}</span>
                                    <span class="text-sub">Last: ${lastUpdate}</span>
                                </div>
                            </div>
                            <button class="card-btn mt-4 w-full py-2.5 border border-main text-main text-sm font-semibold rounded"><span>View Devlog</span></button>
                        </div>
                    </div>`;
            }).join('');
            initScrollReveal();
        }

        function openDevlogModal(projectId) {
            const project = siteData.devlogProjects.find(p => p.id === projectId);
            if (!project) return;
            const entries = project.entries || [];
            const sortedEntries = [...entries].sort((a, b) => new Date(b.date) - new Date(a.date));
            const lastUpdate = sortedEntries[0]?.date ? formatDate(sortedEntries[0].date) : 'No updates yet';
            document.getElementById('devlogModalTitle').textContent = `${project.name} ‚Äî Development Log`;
            document.getElementById('devlogModalSubtitle').textContent = `${entries.length} update${entries.length !== 1 ? 's' : ''} ‚Ä¢ Last update: ${lastUpdate}`;
            const body = document.getElementById('devlogModalBody');
            if (entries.length === 0) {
                body.innerHTML = `<div class="devlog-empty"><p>No updates yet for this project.</p></div>`;
            } else {
                body.innerHTML = sortedEntries.map((entry, index) => {
                    const entryNum = String(entries.length - index).padStart(2, '0');
                    return `
                        <div class="devlog-entry" data-entry-id="${entry.id}">
                            <div class="devlog-entry-header" onclick="toggleDevlogEntry(this)">
                                <span class="devlog-entry-number">#${entryNum}</span>
                                <span class="devlog-entry-date">${formatDate(entry.date)}</span>
                                <div class="flex-1">
                                    <span class="devlog-entry-title">${entry.title}</span>
                                    <p class="devlog-entry-summary">${entry.summary || ''}</p>
                                </div>
                                <svg class="devlog-entry-toggle w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </div>
                            <div class="devlog-entry-content">
                                ${entry.content ? `<div class="devlog-entry-body">${renderContentWithMedia(entry.content)}</div>` : ''}
                                ${entry.tags?.length ? `<div class="devlog-tags">${entry.tags.map(t => `<span class="devlog-tag">#${t}</span>`).join('')}</div>` : ''}
                            </div>
                        </div>`;
                }).join('');
            }
            document.getElementById('devlogModal').classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeDevlogModal() { document.getElementById('devlogModal').classList.remove('open'); document.body.style.overflow = ''; }
        function toggleDevlogEntry(header) { header.nextElementSibling.classList.toggle('open'); header.querySelector('.devlog-entry-toggle').classList.toggle('open'); }
        function formatDate(dateStr) { return new Date(dateStr).toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' }); }

        function renderContentWithMedia(content) {
            if (!content) return '';
            return content.split('\n').map(line => {
                const t = line.trim();
                // Check for images
                if (t.match(/\.(png|jpg|jpeg|gif|webp)$/i)) {
                    return `<div class="devlog-inline-media my-3"><img src="${t}" alt="Media" class="cursor-pointer" onclick="openLightbox('${t}', 'image')" onerror="this.parentElement.innerHTML='‚ö†Ô∏è Failed to load'"></div>`;
                }
                // Check for YouTube
                if (isYouTubeUrl(t)) {
                    const videoId = getYouTubeId(t);
                    if (videoId) {
                        return `<div class="devlog-inline-media my-3">
                            <div class="relative inline-block cursor-pointer" onclick="openLightbox('${t}', 'youtube')">
                                <img src="${getYouTubeThumbnail(videoId)}" alt="YouTube Video" class="rounded-lg border border-gray-600" style="max-width: 400px;">
                                <div class="absolute inset-0 flex items-center justify-center bg-black/40 rounded-lg">
                                    <div class="w-14 h-14 rounded-full bg-red-600 flex items-center justify-center">
                                        <svg class="w-7 h-7 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                    }
                }
                // Check for local videos
                if (t.match(/\.(mp4|webm|ogg)$/i)) {
                    return `<div class="devlog-inline-media my-3"><div class="relative inline-block cursor-pointer" onclick="openLightbox('${t}', 'video')"><video src="${t}" muted playsinline preload="metadata" crossorigin="anonymous" onloadedmetadata="try{this.currentTime=0.1;}catch(e){}" onerror="this.poster='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22225%22><rect fill=%22%23374151%22 width=%22400%22 height=%22225%22/><text x=%22200%22 y=%22120%22 text-anchor=%22middle%22 fill=%22%239CA3AF%22 font-size=%2216%22>Video</text></svg>'" class="rounded-lg border border-gray-600" style="max-width: 400px; min-height: 200px; background: #374151;"></video><div class="absolute inset-0 flex items-center justify-center bg-black/30 rounded-lg pointer-events-none"><div class="w-12 h-12 rounded-full bg-white/90 flex items-center justify-center"><svg class="w-6 h-6 text-black ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div></div><span class="absolute bottom-2 right-2 text-xs text-white bg-black/70 px-1.5 py-0.5 rounded">VIDEO</span></div></div>`;
                }
                if (t) return `<p class="text-sub leading-relaxed mb-2">${t}</p>`;
                return '<div class="h-2"></div>';
            }).join('');
        }

        function openLightbox(src, type) {
            const content = document.getElementById('lightboxContent');
            if (type === 'youtube') {
                const videoId = getYouTubeId(src);
                if (videoId) {
                    content.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                }
            } else if (type === 'video') {
                content.innerHTML = `<video src="${src}" controls autoplay class="rounded-lg"></video>`;
            } else {
                content.innerHTML = `<img src="${src}" alt="Preview" class="rounded-lg">`;
            }
            document.getElementById('mediaLightbox').classList.add('open');
        }
        function closeLightbox() { 
            document.getElementById('mediaLightbox').classList.remove('open'); 
            document.getElementById('lightboxContent').innerHTML = '';
        }

        // ==================== DEVLOG ADMIN ====================
        function renderDevlogProjectsAdmin() {
            const list = document.getElementById('devlogProjectsList');
            if (!siteData.devlogProjects?.length) { list.innerHTML = '<p class="text-gray-400">Hen√ºz devlog projesi yok.</p>'; return; }
            list.innerHTML = siteData.devlogProjects.map((project, pIndex) => {
                const entries = project.entries || [];
                return `
                    <div class="project-card-admin">
                        <div class="project-card-admin-header">
                            <div class="flex items-center gap-3">
                                <div class="order-number">${pIndex + 1}</div>
                                <div><h4 class="text-white font-semibold">${project.name}</h4><p class="text-gray-400 text-sm">${entries.length} g√ºncelleme</p></div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="editDevlogProject(${project.id})" class="admin-btn admin-btn-secondary text-sm">‚úèÔ∏è D√ºzenle</button>
                                <button onclick="addDevlogEntry(${project.id})" class="admin-btn admin-btn-primary text-sm">+ G√ºncelleme</button>
                                <button onclick="deleteDevlogProject(${project.id})" class="admin-btn admin-btn-danger text-sm">üóëÔ∏è</button>
                            </div>
                        </div>
                        ${entries.length > 0 ? `<div class="mt-3 space-y-2">${[...entries].sort((a,b) => new Date(b.date) - new Date(a.date)).slice(0, 3).map(entry => `
                            <div class="flex items-center justify-between bg-black/30 rounded-lg px-3 py-2">
                                <div class="flex items-center gap-3"><span class="text-gray-500 text-xs">${formatDate(entry.date)}</span><span class="text-gray-300 text-sm">${entry.title}</span></div>
                                <div class="flex gap-2"><button onclick="editDevlogEntry(${project.id}, ${entry.id})" class="text-gray-400 hover:text-white text-sm">‚úèÔ∏è</button><button onclick="deleteDevlogEntry(${project.id}, ${entry.id})" class="text-red-400 hover:text-red-300 text-sm">üóëÔ∏è</button></div>
                            </div>`).join('')}${entries.length > 3 ? `<p class="text-gray-500 text-xs text-center">+${entries.length - 3} daha...</p>` : ''}</div>` : ''}
                    </div>`;
            }).join('');
        }

        function addDevlogProject() { siteData.devlogProjects.push({ id: Date.now(), name: "Yeni Proje", description: "A√ßƒ±klama", thumbnail: "./assets/placeholder.png", entries: [] }); renderDevlogProjectsAdmin(); editDevlogProject(siteData.devlogProjects[siteData.devlogProjects.length-1].id); }
        function editDevlogProject(projectId) { const project = siteData.devlogProjects.find(p => p.id === projectId); if (!project) return; const modal = document.createElement('div'); modal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-[10001] p-4'; modal.id = 'editDevlogProjectModal'; modal.innerHTML = `<div class="bg-gray-900 rounded-lg max-w-lg w-full p-6 border border-gray-700"><h3 class="text-xl font-bold text-white mb-4">‚úèÔ∏è Devlog Projesi</h3><label class="admin-label">Proje Adƒ±</label><input type="text" id="editDevlogName" class="admin-input" value="${project.name}"><label class="admin-label">A√ßƒ±klama</label><input type="text" id="editDevlogDesc" class="admin-input" value="${project.description}"><label class="admin-label">Thumbnail URL</label><input type="text" id="editDevlogThumb" class="admin-input" value="${project.thumbnail}"><div class="flex gap-3 mt-4"><button onclick="saveDevlogProject(${projectId})" class="admin-btn admin-btn-success">üíæ Kaydet</button><button onclick="document.getElementById('editDevlogProjectModal').remove()" class="admin-btn admin-btn-secondary">ƒ∞ptal</button></div></div>`; document.body.appendChild(modal); }
        function saveDevlogProject(projectId) { const project = siteData.devlogProjects.find(p => p.id === projectId); if (project) { project.name = document.getElementById('editDevlogName').value; project.description = document.getElementById('editDevlogDesc').value; project.thumbnail = document.getElementById('editDevlogThumb').value; } document.getElementById('editDevlogProjectModal').remove(); renderDevlogProjectsAdmin(); showToast('‚úÖ Proje g√ºncellendi!'); }
        function deleteDevlogProject(projectId) { if (confirm('Bu projeyi silmek istediƒüinize emin misiniz?')) { siteData.devlogProjects = siteData.devlogProjects.filter(p => p.id !== projectId); renderDevlogProjectsAdmin(); showToast('üóëÔ∏è Proje silindi!'); } }
        function addDevlogEntry(projectId) { document.getElementById('devlogEntryModalTitle').textContent = 'üìù Yeni G√ºncelleme'; document.getElementById('editingDevlogProjectId').value = projectId; document.getElementById('editingDevlogEntryId').value = ''; document.getElementById('devlogEntryDate').value = new Date().toISOString().split('T')[0]; document.getElementById('devlogEntryTitle').value = ''; document.getElementById('devlogEntrySummary').value = ''; document.getElementById('devlogEntryContent').value = ''; document.getElementById('devlogEntryTags').value = ''; document.getElementById('devlogEntryModal').style.display = 'flex'; }
        function editDevlogEntry(projectId, entryId) { const project = siteData.devlogProjects.find(p => p.id === projectId); const entry = project?.entries?.find(e => e.id === entryId); if (!entry) return; document.getElementById('devlogEntryModalTitle').textContent = '‚úèÔ∏è G√ºncelleme D√ºzenle'; document.getElementById('editingDevlogProjectId').value = projectId; document.getElementById('editingDevlogEntryId').value = entryId; document.getElementById('devlogEntryDate').value = entry.date; document.getElementById('devlogEntryTitle').value = entry.title; document.getElementById('devlogEntrySummary').value = entry.summary || ''; document.getElementById('devlogEntryContent').value = entry.content || ''; document.getElementById('devlogEntryTags').value = (entry.tags || []).join(', '); document.getElementById('devlogEntryModal').style.display = 'flex'; }
        function closeDevlogEntryModal() { document.getElementById('devlogEntryModal').style.display = 'none'; }
        function saveDevlogEntry() { const projectId = parseInt(document.getElementById('editingDevlogProjectId').value); const entryId = document.getElementById('editingDevlogEntryId').value; const project = siteData.devlogProjects.find(p => p.id === projectId); if (!project) return; const entryData = { id: entryId ? parseInt(entryId) : Date.now(), date: document.getElementById('devlogEntryDate').value, title: document.getElementById('devlogEntryTitle').value, summary: document.getElementById('devlogEntrySummary').value, content: document.getElementById('devlogEntryContent').value, tags: document.getElementById('devlogEntryTags').value.split(',').map(s => s.trim()).filter(s => s) }; if (!project.entries) project.entries = []; if (entryId) { const index = project.entries.findIndex(e => e.id === parseInt(entryId)); if (index !== -1) project.entries[index] = entryData; } else { project.entries.push(entryData); } closeDevlogEntryModal(); renderDevlogProjectsAdmin(); showToast('‚úÖ G√ºncelleme kaydedildi!'); }
        function deleteDevlogEntry(projectId, entryId) { if (confirm('Bu g√ºncellemeyi silmek istediƒüinize emin misiniz?')) { const project = siteData.devlogProjects.find(p => p.id === projectId); if (project) { project.entries = project.entries.filter(e => e.id !== entryId); renderDevlogProjectsAdmin(); showToast('üóëÔ∏è G√ºncelleme silindi!'); } } }

        // ==================== ADMIN PANEL ====================
        document.addEventListener('keydown', function(e) { if (e.ctrlKey && e.shiftKey && e.key === 'P') { e.preventDefault(); openAdmin(); } if (e.key === 'Escape') { closeModal(); closeDevlogModal(); closeLightbox(); closeDevlogEntryModal(); if (!isLoggedIn) closeAdmin(); } });
        function openAdmin() { document.getElementById('adminOverlay').classList.add('show'); document.getElementById('passwordModal').style.display = 'block'; document.getElementById('adminPanel').style.display = 'none'; document.getElementById('adminPassword').focus(); }
        function closeAdmin() { document.getElementById('adminOverlay').classList.remove('show'); isLoggedIn = false; }
        function checkPassword() { if (document.getElementById('adminPassword').value === adminPassword) { isLoggedIn = true; document.getElementById('passwordModal').style.display = 'none'; document.getElementById('adminPanel').style.display = 'flex'; loadAdminForm(); showToast('‚úÖ Giri≈ü ba≈üarƒ±lƒ±!'); } else { showToast('‚ùå Yanlƒ±≈ü ≈üifre!'); document.getElementById('adminPassword').value = ''; } }

        function loadAdminForm() {
            document.getElementById('heroSubtitle').value = siteData.hero.subtitle;
            document.getElementById('heroTitle').value = siteData.hero.title;
            document.getElementById('heroDesc').value = siteData.hero.desc;
            document.getElementById('heroButton').value = siteData.hero.button;
            document.getElementById('aboutTitle').value = siteData.about.title;
            document.getElementById('aboutText1').value = siteData.about.text1;
            document.getElementById('aboutText2').value = siteData.about.text2;
            renderSkillsAdmin();
            document.getElementById('expTitle').value = siteData.experience.title;
            renderExpAdmin();
            document.getElementById('socialGithub').value = siteData.social.github;
            document.getElementById('socialGmail').value = siteData.social.gmail;
            document.getElementById('socialDiscord').value = siteData.social.discord;
            document.getElementById('navAbout').value = siteData.nav.about;
            document.getElementById('navDevlog').value = siteData.nav.devlog;
            document.getElementById('navProjects').value = siteData.nav.projects;
            document.getElementById('devlogSectionTitle').value = siteData.devlogSection.title;
            document.getElementById('devlogSectionSubtitle').value = siteData.devlogSection.subtitle;
            document.getElementById('projectsTitle').value = siteData.projectsSection.title;
            document.getElementById('projectsSubtitle').value = siteData.projectsSection.subtitle;
            document.getElementById('otherProjectsTitle').value = siteData.projectsSection.otherProjectsTitle || 'Other Projects';
            document.getElementById('footerCopyright').value = siteData.footer.copyright;
            document.getElementById('footerSubtext').value = siteData.footer.subtext;
            document.getElementById('siteTitle').value = siteData.siteTitle;
            const cfg = firebaseConfig || {};
            document.getElementById('fbApiKey').value = cfg.apiKey || '';
            document.getElementById('fbDatabaseUrl').value = cfg.databaseURL || '';
            document.getElementById('fbProjectId').value = cfg.projectId || '';
            document.getElementById('fbAppId').value = cfg.appId || '';
            renderDevlogProjectsAdmin();
            renderProjectsAdmin();
        }

        function switchTab(name) { document.querySelectorAll('.tab-content').forEach(t => t.style.display = 'none'); document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active')); document.getElementById(`tab-${name}`).style.display = 'block'; event.target.classList.add('active'); }
        function changePassword() { const newPass = document.getElementById('newPassword').value; if (newPass.length >= 4) { adminPassword = newPass; localStorage.setItem('adminPassword', newPass); showToast('‚úÖ ≈ûifre deƒüi≈ütirildi!'); document.getElementById('newPassword').value = ''; } else { showToast('‚ùå ≈ûifre en az 4 karakter olmalƒ±!'); } }

        function renderSkillsAdmin() { document.getElementById('skillsList').innerHTML = siteData.skills.map((s, i) => `<div class="skill-item"><input type="text" class="admin-input" value="${s}" style="margin-bottom:0;"><button onclick="removeSkill(${i})" class="admin-btn admin-btn-danger">√ó</button></div>`).join(''); }
        function addSkill() { siteData.skills.push('Yeni Yetenek'); renderSkillsAdmin(); }
        function removeSkill(i) { siteData.skills.splice(i, 1); renderSkillsAdmin(); }

        function renderExpAdmin() { document.getElementById('expList').innerHTML = siteData.experience.items.map((e, i) => `<div class="exp-item"><input type="text" class="admin-input" value="${e}" style="margin-bottom:0;"><button onclick="removeExp(${i})" class="admin-btn admin-btn-danger">√ó</button></div>`).join(''); }
        function addExp() { siteData.experience.items.push('Yeni deneyim'); renderExpAdmin(); }
        function removeExp(i) { siteData.experience.items.splice(i, 1); renderExpAdmin(); }

        // ==================== DRAG & DROP PROJECTS ====================
        let draggedProjectIndex = null;
        function renderProjectsAdmin() {
            document.getElementById('projectsList').innerHTML = siteData.projects.map((p, i) => `
                <div class="project-card-admin" draggable="true" data-index="${i}" ondragstart="handleDragStart(event, ${i})" ondragover="handleDragOver(event)" ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event, ${i})" ondragend="handleDragEnd(event)">
                    <div class="project-card-admin-header">
                        <div class="flex items-center gap-3">
                            <div class="drag-handle"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/></svg></div>
                            <div class="order-number">${i + 1}</div>
                            <span class="category-badge ${p.category || 'main'}">${p.category === 'other' ? 'Other' : 'Main'}</span>
                            <div><h4 class="text-white font-semibold">${p.title}</h4><p class="text-gray-400 text-sm">${p.shortDesc.substring(0, 50)}...</p></div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="toggleProjectCategory(${i})" class="admin-btn admin-btn-secondary text-sm">${p.category === 'other' ? '‚¨ÜÔ∏è Main' : '‚¨áÔ∏è Other'}</button>
                            <button onclick="editProject(${i})" class="admin-btn admin-btn-secondary">‚úèÔ∏è</button>
                            <button onclick="deleteProject(${i})" class="admin-btn admin-btn-danger">üóëÔ∏è</button>
                        </div>
                    </div>
                </div>`).join('');
        }

        function handleDragStart(e, index) { draggedProjectIndex = index; e.target.classList.add('dragging'); }
        function handleDragOver(e) { e.preventDefault(); }
        function handleDragEnter(e) { e.preventDefault(); const card = e.target.closest('.project-card-admin'); if (card) card.classList.add('drag-over'); }
        function handleDragLeave(e) { const card = e.target.closest('.project-card-admin'); if (card) card.classList.remove('drag-over'); }
        function handleDrop(e, targetIndex) { e.preventDefault(); const card = e.target.closest('.project-card-admin'); if (card) card.classList.remove('drag-over'); if (draggedProjectIndex !== null && draggedProjectIndex !== targetIndex) { const draggedItem = siteData.projects[draggedProjectIndex]; siteData.projects.splice(draggedProjectIndex, 1); siteData.projects.splice(targetIndex, 0, draggedItem); renderProjectsAdmin(); showToast('üì¶ Proje sƒ±rasƒ± g√ºncellendi!'); } }
        function handleDragEnd(e) { e.target.classList.remove('dragging'); document.querySelectorAll('.project-card-admin').forEach(card => card.classList.remove('drag-over')); draggedProjectIndex = null; }
        function toggleProjectCategory(index) { siteData.projects[index].category = siteData.projects[index].category === 'other' ? 'main' : 'other'; renderProjectsAdmin(); showToast(`üìÅ Proje kategorisi deƒüi≈ütirildi`); }
        function addNewProject() { siteData.projects.push({ id: Date.now(), title: "Yeni Proje", shortDesc: "A√ßƒ±klama...", fullDesc: "Detay...", thumbnail: "", screenshots: [], videos: [], technologies: ["Unity"], platforms: ["PC"], year: new Date().getFullYear().toString(), downloadLink: "", category: "main" }); renderProjectsAdmin(); editProject(siteData.projects.length - 1); }

        function editProject(index) { const p = siteData.projects[index]; const modal = document.createElement('div'); modal.className = 'fixed inset-0 bg-black/90 flex items-center justify-center z-[10001] p-4'; modal.id = 'editProjectModal'; modal.innerHTML = `<div class="bg-gray-900 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6 border border-gray-700"><h3 class="text-xl font-bold text-white mb-4">‚úèÔ∏è Proje D√ºzenle</h3><div class="grid-2"><div><label class="admin-label">Ba≈ülƒ±k</label><input type="text" id="editTitle" class="admin-input" value="${p.title}"></div><div><label class="admin-label">Yƒ±l</label><input type="text" id="editYear" class="admin-input" value="${p.year}"></div></div><div class="grid-2"><div><label class="admin-label">Kategori</label><select id="editCategory" class="admin-input"><option value="main" ${p.category !== 'other' ? 'selected' : ''}>Main Projects</option><option value="other" ${p.category === 'other' ? 'selected' : ''}>Other Projects</option></select></div></div><label class="admin-label">Kƒ±sa A√ßƒ±klama</label><input type="text" id="editShortDesc" class="admin-input" value="${p.shortDesc}"><label class="admin-label">Detaylƒ± A√ßƒ±klama</label><textarea id="editFullDesc" class="admin-input admin-textarea" style="min-height:150px;">${p.fullDesc}</textarea><label class="admin-label">Thumbnail URL</label><input type="text" id="editThumbnail" class="admin-input" value="${p.thumbnail}"><label class="admin-label">Screenshots (virg√ºlle ayƒ±r)</label><input type="text" id="editScreenshots" class="admin-input" value="${p.screenshots.join(', ')}"><label class="admin-label">Videos (virg√ºlle ayƒ±r - dosya yolu veya YouTube linki)</label><input type="text" id="editVideos" class="admin-input" value="${p.videos.join(', ')}" placeholder="./assets/video.mp4, https://www.youtube.com/watch?v=VIDEO_ID"><label class="admin-label">Teknolojiler (virg√ºlle ayƒ±r)</label><input type="text" id="editTech" class="admin-input" value="${p.technologies.join(', ')}"><label class="admin-label">Platformlar (virg√ºlle ayƒ±r)</label><input type="text" id="editPlatforms" class="admin-input" value="${p.platforms.join(', ')}"><label class="admin-label">Download Link</label><input type="text" id="editDownload" class="admin-input" value="${p.downloadLink}"><div class="flex gap-3 mt-4"><button onclick="saveProjectEdit(${index})" class="admin-btn admin-btn-success">üíæ Kaydet</button><button onclick="document.getElementById('editProjectModal').remove()" class="admin-btn admin-btn-secondary">ƒ∞ptal</button></div></div>`; document.body.appendChild(modal); }
        function saveProjectEdit(index) { siteData.projects[index] = { ...siteData.projects[index], title: document.getElementById('editTitle').value, shortDesc: document.getElementById('editShortDesc').value, fullDesc: document.getElementById('editFullDesc').value, thumbnail: document.getElementById('editThumbnail').value, screenshots: document.getElementById('editScreenshots').value.split(',').map(s => s.trim()).filter(s => s), videos: document.getElementById('editVideos').value.split(',').map(s => s.trim()).filter(s => s), technologies: document.getElementById('editTech').value.split(',').map(s => s.trim()).filter(s => s), platforms: document.getElementById('editPlatforms').value.split(',').map(s => s.trim()).filter(s => s), year: document.getElementById('editYear').value, downloadLink: document.getElementById('editDownload').value, category: document.getElementById('editCategory').value }; document.getElementById('editProjectModal').remove(); renderProjectsAdmin(); showToast('‚úÖ Proje g√ºncellendi!'); }
        function deleteProject(index) { if (confirm('Bu projeyi silmek istediƒüinize emin misiniz?')) { siteData.projects.splice(index, 1); renderProjectsAdmin(); showToast('üóëÔ∏è Proje silindi!'); } }

        function renderProjects() {
            const mainProjects = siteData.projects.filter(p => p.category !== 'other');
            const otherProjects = siteData.projects.filter(p => p.category === 'other');
            const mainGrid = document.getElementById('mainProjectsGrid');
            const otherGrid = document.getElementById('otherProjectsGrid');
            const otherTitle = document.getElementById('otherProjectsTitleDisplay');
            mainGrid.innerHTML = mainProjects.length ? mainProjects.map(p => renderProjectCard(p)).join('') : '<p class="text-sub text-center col-span-3">No main projects yet.</p>';
            if (otherProjects.length) { otherTitle.style.display = 'block'; otherGrid.innerHTML = otherProjects.map(p => renderProjectCard(p)).join(''); } else { otherTitle.style.display = 'none'; otherGrid.innerHTML = ''; }
            initScrollReveal();
        }

        function renderProjectCard(p) {
            const thumb = fixAssetPath(p.thumbnail);
            return `
                <div class="project-card cursor-pointer shadow-lg scroll-reveal rounded-lg" onclick="openModal(${p.id})">
                    <div class="card-image aspect-video"><img src="${thumb}" alt="${p.title}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/400x225?text=No+Image'"></div>
                    <div class="card-content p-6">
                        <div class="card-body">
                            <div class="flex justify-between items-start mb-2"><h3 class="text-xl font-bold text-main">${p.title}</h3><span class="text-sm text-sub">${p.year}</span></div>
                            <p class="text-sub mb-4">${p.shortDesc}</p>
                            <div class="flex flex-wrap gap-2">${p.platforms.map(pl => `<span class="text-xs px-2 py-1 section-secondary text-sub rounded">${pl}</span>`).join('')}</div>
                        </div>
                        <button class="card-btn mt-4 w-full py-2.5 border border-main text-main text-sm font-semibold rounded"><span>View Project</span></button>
                    </div>
                </div>`;
        }

        function initSlideshow() {
            const container = document.getElementById('heroSlideshow');
            const allImages = [];
            siteData.projects?.forEach(p => { if (p.thumbnail) allImages.push(p.thumbnail); p.screenshots?.forEach(s => { if (!allImages.includes(s)) allImages.push(s); }); });
            if (!allImages.length) { container.innerHTML = '<div class="hero-slide active" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);"></div>'; return; }
            container.innerHTML = allImages.map((img, i) => `<div class="hero-slide ${i === 0 ? 'active' : ''}"><img src="${img}" alt="Screenshot" onerror="this.parentElement.style.display='none'"></div>`).join('');
            if (allImages.length > 1) { let current = 0; setInterval(() => { const slides = document.querySelectorAll('.hero-slide'); if (slides.length) { slides[current].classList.remove('active'); current = (current + 1) % slides.length; slides[current].classList.add('active'); } }, 4000); }
        }

        function toggleTheme() { document.body.classList.toggle('dark'); localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light'); }
        if (localStorage.getItem('theme') === 'light') document.body.classList.remove('dark');

        function showToast(msg) { const toast = document.getElementById('toast'); toast.textContent = msg; toast.classList.add('show'); setTimeout(() => toast.classList.remove('show'), 3000); }
        function showContactInfo(type, value) { navigator.clipboard.writeText(value); showToast(`${type === 'gmail' ? 'üìß' : 'üéÆ'} ${value} (Copied!)`); }

        function openModal(id) {
            const project = siteData.projects.find(p => p.id === id);
            if (!project) return;
            
            const thumb = fixAssetPath(project.thumbnail);
            
            // Generate video thumbnails
            const videoThumbnails = (project.videos || []).map(v => {
                const fixedV = fixAssetPath(v);
                const escapedUrl = fixedV.replace(/'/g, "\\'");
                if (isYouTubeUrl(v)) {
                    const videoId = getYouTubeId(v);
                    return `<div class="relative w-full aspect-video cursor-pointer bg-gray-800 rounded overflow-hidden" onclick="showVideo('${escapedUrl}')">
                        <img src="${getYouTubeThumbnail(videoId)}" alt="YouTube Video" class="w-full h-full object-cover">
                        <div class="absolute inset-0 flex items-center justify-center bg-black/40">
                            <div class="w-10 h-10 rounded-full bg-red-600 flex items-center justify-center">
                                <svg class="w-5 h-5 text-white ml-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                        </div>
                        <span class="absolute bottom-1 right-1 text-xs text-white bg-red-600 px-1 rounded">YouTube</span>
                    </div>`;
                } else {
                    // Local video - show static thumbnail with play button
                    return `<div class="relative w-full aspect-video cursor-pointer bg-gray-700 rounded overflow-hidden" onclick="showVideo('${escapedUrl}')">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <svg class="w-10 h-10 text-gray-500" fill="currentColor" viewBox="0 0 24 24"><path d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"/></svg>
                        </div>
                        <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                            <div class="w-10 h-10 rounded-full bg-white/90 flex items-center justify-center">
                                <svg class="w-5 h-5 text-black ml-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                        </div>
                        <span class="absolute bottom-1 right-1 text-xs text-white bg-black/70 px-1 rounded">VIDEO</span>
                    </div>`;
                }
            }).join('');
            
            // Generate screenshot thumbnails
            const screenshotThumbnails = (project.screenshots || []).slice(0, 4 - (project.videos?.length || 0)).map(s => {
                const escapedUrl = s.replace(/'/g, "\\'");
                return `<img src="${s}" alt="Screenshot" class="w-full aspect-video object-cover cursor-pointer rounded" onclick="showImage('${escapedUrl}')" onerror="this.style.display='none'">`;
            }).join('');
            
            document.getElementById('modalContent').innerHTML = `
                <div class="grid lg:grid-cols-2 gap-8">
                    <div>
                        <div id="mainMedia" class="w-full aspect-video mb-4 bg-black rounded-lg overflow-hidden"><img src="${project.thumbnail}" alt="${project.title}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/800x450?text=No+Image'"></div>
                        ${(project.screenshots?.length || project.videos?.length) ? `<div class="grid grid-cols-4 gap-2">${videoThumbnails}${screenshotThumbnails}</div>` : ''}
                    </div>
                    <div>
                        <div class="flex items-center gap-4 mb-4"><h2 class="text-3xl font-bold text-main">${project.title}</h2><span class="text-sub">${project.year}</span></div>
                        <p class="text-sub text-lg leading-relaxed mb-6" style="white-space: pre-line;">${project.fullDesc}</p>
                        <div class="mb-6"><h4 class="font-bold mb-3 text-main">Technologies</h4><div class="flex flex-wrap gap-2">${project.technologies.map(t => `<span class="px-3 py-1 border border-main text-sm rounded text-main">${t}</span>`).join('')}</div></div>
                        <div class="mb-6"><h4 class="font-bold mb-3 text-main">Platforms</h4><div class="flex flex-wrap gap-2">${project.platforms.map(p => `<span class="px-3 py-1 text-sm rounded" style="background-color: var(--accent); color: var(--bg-primary);">${p}</span>`).join('')}</div></div>
                        ${project.downloadLink ? `<a href="${project.downloadLink}" target="_blank" class="inline-flex items-center gap-2 px-6 py-3 font-semibold rounded" style="background-color: var(--accent); color: var(--bg-primary);"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>Download Demo</a>` : ''}
                    </div>
                </div>`;
            document.getElementById('projectModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() { document.getElementById('projectModal').classList.add('hidden'); document.body.style.overflow = ''; }
        
        function showVideo(url) { 
            const mainMedia = document.getElementById('mainMedia');
            if (isYouTubeUrl(url)) {
                const videoId = getYouTubeId(url);
                if (videoId) {
                    mainMedia.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0" class="w-full h-full" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                }
            } else {
                mainMedia.innerHTML = `<video src="${url}" class="w-full h-full" controls autoplay></video>`;
            }
        }
        
        function showImage(url) { document.getElementById('mainMedia').innerHTML = `<img src="${url}" alt="Screenshot" class="w-full h-full object-cover">`; }

        // Scroll Reveal - Simplified
        function initScrollReveal() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('revealed'); observer.unobserve(entry.target); } });
            }, { threshold: 0.1 });
            document.querySelectorAll('.scroll-reveal:not(.revealed)').forEach(el => observer.observe(el));
        }

        // Debug helper - check console for errors on GitHub Pages
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Error: ' + msg + '\nURL: ' + url + '\nLine: ' + lineNo);
            return false;
        };

        // Init
        try {
            initFirebase();
            initScrollReveal();
        } catch(e) {
            console.error('Init error:', e);
            hideLoading();
            applyAllData();
        }
    </script>
</body>
</html>